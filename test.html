<!doctype html>
<div id="container"></div>
<script type="module">
    import * as Plot from "https://cdn.jsdelivr.net/npm/@observablehq/plot@0.6/+esm";
    import * as htl from "https://cdn.jsdelivr.net/npm/htl@0.3/+esm";

    const rows = [
        ["2025-12-01 05:15:15.044873+00", "2400"],
        ["2025-12-01 05:15:23.058648+00", "2415"],
        ["2025-12-01 05:15:35.36009+00", "2437.1"],
        ["2025-12-01 05:15:39.301725+00", "2459.1"],
        ["2025-12-01 05:15:53.754727+00", "2460.2"],
        ["2025-12-01 05:18:14.722265+00", "2000"],
        ["2025-12-01 05:18:23.238248+00", "2200"],
        ["2025-12-01 05:18:35.67461+00", "2400"],
        ["2025-12-01 05:18:50.983132+00", "2400"],
        ["2025-12-01 05:21:16.316163+00", "2400"],
        ["2025-12-01 05:50:26.435035+00", "2400"],
        ["2025-12-01 05:50:31.66985+00", "2300"],
        ["2025-12-01 05:50:37.145078+00", "2323.4"],
        ["2025-12-01 05:51:33.35444+00", "2346.8"],
        ["2025-12-01 05:53:18.683358+00", "2346.8"],
        ["2025-12-01 05:54:16.306301+00", "2361.8"],
        ["2025-12-01 05:54:25.843534+00", "2300"],
        ["2025-12-01 05:54:41.603255+00", "2244.4"],
        ["2025-12-01 05:55:22.047198+00", "2299.9"],
        ["2025-12-01 05:56:44.338777+00", "2277.7"],
        ["2025-12-01 06:10:10.661379+00", "2000"],
    ].map((row) => ({
        date: new Date(row[0]),
        power: parseFloat(row[1]),
    }));

    const plot = Plot.plot({
        marks: [
            () => htl.svg`<defs>
             <linearGradient id="gradient" gradientTransform="rotate(90)">
               <stop offset="0%" stop-color="#0fdb9b" />
               <stop offset="100%" stop-color="#060627" />
             </linearGradient>
           </defs>`,
            Plot.lineY(rows, {
                x: "date",
                y: "power",
                curve: "monotone-x",
                stroke: "url(#gradient)",
                strokeWidth: 2,
            }),
            Plot.text(rows, {
                x: "date",
                y: "power",
                text: (r) => r.power,
                dy: -6,
                lineAnchor: "bottom",
            }),
            Plot.dot(rows, { x: "date", y: "power" }),
        ],
    });

    const div = document.querySelector("#container");
    div.append(plot);
</script>
